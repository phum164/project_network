<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiplayer Memory Card Game</title>
    <link rel="stylesheet" href="css/styles.css">
    <script defer src="/socket.io/socket.io.js"></script>
    <script defer src="scripts.js"></script>
</head>

<body>

    <script>
        // Retrieve player name and room code from URL when page loads
        document.addEventListener('DOMContentLoaded', () => {
            const queryParams = new URLSearchParams(window.location.search);
            const playerName = queryParams.get('name');
            const roomCode = queryParams.get('room');
            const totalCards = queryParams.get('cards');

            if (playerName && roomCode) {
                console.log(roomCode);
                console.log(playerName);
                // Set up socket and join the room
                joinRoom(roomCode, playerName, totalCards);
                document.getElementById('player-info').textContent = `Player: ${playerName} | Room: ${roomCode}`;
            } else {
                alert('Player name and room code are required to join.');
                window.location.href = 'index.html'; // Redirect back if data is missing
            }
        });
    </script>

    <!-- เพิ่มเพลงพื้นหลัง -->
    <audio id="background-music" autoplay loop hidden>
        <source src="sounds/backG.mp3" type="audio/mp3">
        <!-- คุณสามารถเพิ่ม source สำหรับไฟล์เสียงรูปแบบอื่นๆ ได้ตามต้องการ -->
        Your browser does not support the audio element.
    </audio>

    <div>
        <div class="turn-indicator">
            <section class="game-status">
                <p id="turn-indicator" style="color: rgb(222, 247, 0); margin-left: 3em;font-size: 1.3em;">Wait another player</p>
            </section>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.14.1/dist/sweetalert2.all.min.js">
    </script>
     <p id="player-info" style="color: white; margin-left: 3em;font-size: 1.3em;"></p>
     <br>
    <section class="score-section">
        <div id="score">Score 0</div>
        <div class="hisgame">
            <p>ประวัติการแพ้ชนะ</p>
            <p id="win-tracker">ประวัติ คุณ: 0 || ฝ่ายตรงข้าม: 0</p>
        </div>
    </section>

    <section class="memory-game">
        <div class="memory-card" id="card-1" data-framework="animal1" onclick="flipCard(1)">
            <img class="front-face" src="img/animal1.svg" alt="Animal 1">
            <img class="back-face" src="img/animal-badge.svg" alt="Badge">
        </div>
        <div class="memory-card" id="card-2" data-framework="animal1" onclick="flipCard(2)">
            <img class="front-face" src="img/animal1.svg" alt="Animal 1">
            <img class="back-face" src="img/animal-badge.svg" alt="Badge">
        </div>

        <div class="memory-card" id="card-3" data-framework="animal2" onclick="flipCard(3)">
            <img class="front-face" src="img/animal2.svg" alt="Animal 2">
            <img class="back-face" src="img/animal-badge.svg" alt="Badge">
        </div>
        <div class="memory-card" id="card-4" data-framework="animal2" onclick="flipCard(4)">
            <img class="front-face" src="img/animal2.svg" alt="Animal 2">
            <img class="back-face" src="img/animal-badge.svg" alt="Badge">
        </div>

        <div class="memory-card" id="card-5" data-framework="animal3" onclick="flipCard(5)">
            <img class="front-face" src="img/animal3.svg" alt="Animal 3">
            <img class="back-face" src="img/animal-badge.svg" alt="Badge">
        </div>
        <div class="memory-card" id="card-6" data-framework="animal3" onclick="flipCard(6)">
            <img class="front-face" src="img/animal3.svg" alt="Animal 3">
            <img class="back-face" src="img/animal-badge.svg" alt="Badge">
        </div>

        <div class="memory-card" id="card-7" data-framework="animal4" onclick="flipCard(7)">
            <img class="front-face" src="img/animal4.svg" alt="Animal 4">
            <img class="back-face" src="img/animal-badge.svg" alt="Badge">
        </div>
        <div class="memory-card" id="card-8" data-framework="animal4" onclick="flipCard(8)">
            <img class="front-face" src="img/animal4.svg" alt="Animal 4">
            <img class="back-face" src="img/animal-badge.svg" alt="Badge">
        </div>

        <div class="memory-card" id="card-9" data-framework="animal5" onclick="flipCard(9)">
            <img class="front-face" src="img/animal5.svg" alt="Animal 5">
            <img class="back-face" src="img/animal-badge.svg" alt="Badge">
        </div>
        <div class="memory-card" id="card-10" data-framework="animal5" onclick="flipCard(10)">
            <img class="front-face" src="img/animal5.svg" alt="Animal 5">
            <img class="back-face" src="img/animal-badge.svg" alt="Badge">
        </div>

        <div class="memory-card" id="card-11" data-framework="animal6" onclick="flipCard(11)">
            <img class="front-face" src="img/animal6.svg" alt="Animal 6">
            <img class="back-face" src="img/animal-badge.svg" alt="Badge">
        </div>
        <div class="memory-card" id="card-12" data-framework="animal6" onclick="flipCard(12)">
            <img class="front-face" src="img/animal6.svg" alt="Animal 6">
            <img class="back-face" src="img/animal-badge.svg" alt="Badge">
        </div>
    </section>

</body>

</html>